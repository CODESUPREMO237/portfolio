<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 620" width="1200" height="620">
  <!-- Background -->
  <rect width="1200" height="620" fill="#0b1220"/>
  
  <!-- Grid -->
  <defs>
    <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
      <path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(255,255,255,0.03)" stroke-width="1"/>
    </pattern>
    
    <linearGradient id="gradSky" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="rgba(14, 165, 233, 0.2)"/>
      <stop offset="100%" stop-color="rgba(14, 165, 233, 0.05)"/>
    </linearGradient>

    <linearGradient id="gradIndigo" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="rgba(99, 102, 241, 0.2)"/>
      <stop offset="100%" stop-color="rgba(99, 102, 241, 0.05)"/>
    </linearGradient>

    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#64748b"/>
    </marker>
    <marker id="arrowActive" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#38bdf8"/>
    </marker>
  </defs>
  
  <rect width="1200" height="620" fill="url(#grid)"/>

  <!-- Client Layer -->
  <g transform="translate(100, 150)">
    <rect width="180" height="80" rx="12" fill="url(#gradSky)" stroke="#0ea5e9" stroke-width="1.5"/>
    <text x="90" y="45" fill="#e2e8f0" font-family="monospace" font-size="16" font-weight="bold" text-anchor="middle">Tenant Clients</text>
    <text x="90" y="65" fill="#94a3b8" font-family="monospace" font-size="12" text-anchor="middle">REST / GraphQL</text>
  </g>

  <!-- API Gateway -->
  <g transform="translate(350, 200)">
    <rect width="180" height="240" rx="12" fill="#1e293b" stroke="#475569" stroke-width="1.5"/>
    <rect width="180" height="40" rx="12" fill="url(#gradIndigo)" stroke="#6366f1" stroke-width="1.5"/>
    <text x="90" y="25" fill="#e2e8f0" font-family="monospace" font-size="16" font-weight="bold" text-anchor="middle">API Gateway</text>
    <text x="90" y="80" fill="#94a3b8" font-family="monospace" font-size="13" text-anchor="middle">Rate Limiting</text>
    <text x="90" y="120" fill="#94a3b8" font-family="monospace" font-size="13" text-anchor="middle">AuthZ / AuthN</text>
    <text x="90" y="160" fill="#94a3b8" font-family="monospace" font-size="13" text-anchor="middle">Tenant Routing</text>
    <text x="90" y="200" fill="#94a3b8" font-family="monospace" font-size="13" text-anchor="middle">Caching Layer</text>
  </g>

  <!-- Stripe / External -->
  <g transform="translate(100, 400)">
    <rect width="180" height="80" rx="12" fill="rgba(255,255,255,0.05)" stroke="#64748b" stroke-width="1.5" stroke-dasharray="4"/>
    <text x="90" y="45" fill="#e2e8f0" font-family="monospace" font-size="16" font-weight="bold" text-anchor="middle">Payment Gateway</text>
    <text x="90" y="65" fill="#94a3b8" font-family="monospace" font-size="12" text-anchor="middle">Stripe / Adyen</text>
  </g>

  <!-- Event Bus -->
  <g transform="translate(620, 120)">
    <rect width="100" height="400" rx="8" fill="#0f172a" stroke="#fbbf24" stroke-width="1.5"/>
    <text x="-300" y="175" fill="#fbbf24" font-family="monospace" font-size="18" font-weight="bold" transform="rotate(-90)" letter-spacing="4">APACHE KAFKA / EVENT BUS</text>
  </g>

  <!-- Microservices -->
  <g transform="translate(800, 80)">
    <rect width="250" height="90" rx="12" fill="url(#gradSky)" stroke="#0ea5e9" stroke-width="1.5"/>
    <text x="125" y="40" fill="#e2e8f0" font-family="monospace" font-size="16" font-weight="bold" text-anchor="middle">Subscription Service</text>
    <text x="125" y="65" fill="#94a3b8" font-family="monospace" font-size="13" text-anchor="middle">Go / gRPC</text>
  </g>

  <g transform="translate(800, 220)">
    <rect width="250" height="90" rx="12" fill="url(#gradIndigo)" stroke="#6366f1" stroke-width="1.5"/>
    <text x="125" y="40" fill="#e2e8f0" font-family="monospace" font-size="16" font-weight="bold" text-anchor="middle">Usage &amp; Metering Engine</text>
    <text x="125" y="65" fill="#94a3b8" font-family="monospace" font-size="13" text-anchor="middle">Rust / Redis</text>
  </g>

  <g transform="translate(800, 360)">
    <rect width="250" height="90" rx="12" fill="#1e293b" stroke="#475569" stroke-width="1.5"/>
    <text x="125" y="40" fill="#e2e8f0" font-family="monospace" font-size="16" font-weight="bold" text-anchor="middle">Invoicing Pipeline</text>
    <text x="125" y="65" fill="#94a3b8" font-family="monospace" font-size="13" text-anchor="middle">Temporal / Node.js</text>
  </g>

  <!-- Databases -->
  <g transform="translate(800, 480)">
    <path d="M 0 20 Q 125 -10 250 20 L 250 80 Q 125 110 0 80 Z" fill="#0f172a" stroke="#10b981" stroke-width="1.5"/>
    <text x="125" y="55" fill="#10b981" font-family="monospace" font-size="16" font-weight="bold" text-anchor="middle">PostgreSQL / Citus</text>
  </g>

  <!-- Connections -->
  <path d="M 280 190 L 350 220" fill="none" stroke="#38bdf8" stroke-width="2" marker-end="url(#arrowActive)"/>
  <path d="M 280 440 L 320 440 L 320 320 L 350 320" fill="none" stroke="#64748b" stroke-width="2" stroke-dasharray="4" marker-end="url(#arrow)"/>
  <path d="M 530 320 L 620 320" fill="none" stroke="#38bdf8" stroke-width="2" marker-end="url(#arrowActive)"/>
  
  <path d="M 720 120 L 800 120" fill="none" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>
  <path d="M 720 260 L 800 260" fill="none" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>
  <path d="M 720 400 L 800 400" fill="none" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>

  <path d="M 925 310 L 925 360" fill="none" stroke="#fbbf24" stroke-width="2" stroke-dasharray="4" marker-end="url(#arrow)"/>
  <path d="M 925 450 L 925 480" fill="none" stroke="#10b981" stroke-width="2" marker-end="url(#arrow)"/>

</svg>